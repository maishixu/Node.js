

## 网络通信

- 应用层：软件层面，浏览器，服务器，软件开发关注！
- 传输层：负责对数据进行拆分（组合），减少丢包率
- 网络层：添加（去除）路由地址信息，指明去处
- 数据链路层：传输信息

### HTTP协议

- 超文本传输协议
- 属于TCP/IP协议族
- 是应用层的协议，用于规定客户端和服务器之间的通信报文格式

#### 请求报文(request)

- 请求首行

```javascript
GET /index.html?username=""&password="" HTTP/1.1
/*
请求方式：GET  POST
	GET请求通过查询字符串把数据发送给服务器
		- 不安全，且url长度有限制不能法较大数据
		- 没有请求体
	POST请求通过请求体(载荷)来发送数据
		- 无法在地址栏直接查看
请求资源路径：/index.html
查询字符串：username=""&password="" 名值对结构，多个值之间用&分割
协议版本：HTTP/1.1
*/
```

- 请求头

```javascript
//名值对结构
Accent 浏览器可以接受的文件类型
Accent-Encoding 浏览器允许的压缩编码格式
Accent-Language 浏览器可以接受的语言
User-Agent 用户代理（浏览器）
```

- 空行

  ​	用来分割请求头和请求体

- 请求体

  ​	post请求通过请求体发送数据

#### 响应报文(response)

- 响应首行

```javascript
HTTP/1.1 200 OK
//协议 状态码 描述
/*
    1xxxx 请求处理中
    2xxxx 请求成功
    3xxxx 请求重定向 (A.com -> B.com)
    4xxxx 客户端错误
    5xxxx 服务器错误
*/
```

- 响应头

```javascript
Content-Type 描述响应体的类型
Content-Length 响应体大小
```

- 空行

  ​	分隔响应头和响应体

- 响应体

  ​	服务端返回给客户端的内容

### 一道面试题

- 当在浏览器中输入地址后发生了什么？

  1. DNS解析，域名转化为IP为地址返回

  2. 浏览器和服务器建立连接（TCP/IP）

     > *三次握手*
     >
     > *客户端 -> 服务器：SYN 请求序列号*
     >
     > *服务器 -> 客户端：SYN - ACK 确认收到字段*
     >
     > *客户端 -> 服务器：ACK 正式连接*

  3. 浏览器向服务器发送请求（HTTP协议）

  4. 服务器处理请求，并返回响应（HTTP协议）

  5. 浏览器将响应的页面渲染

  6. 浏览器和服务器断开连接

     > *四次挥手*
     >
     > *客户端 -> 服务器：FIN 请求断开连接*
     >
     > *服务器 -> 客户端：ACK 确认收到断开请求，准备接收完剩下的数据*
     >
     > *服务器 -> 客户端：FIN - ACK 已接收完数据，同意断开*
     >
     > *客户端 -> 服务器：ACK 正式断开*